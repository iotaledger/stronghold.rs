{
  "gitSiteUrl": "https://www.github.com/iotaledger/stronghold.rs/",
  "timeout": 3600000,
  "pkgManagers": {
    "rust": {
      "version": true,
      "getPublishedVersion": "cargo search ${ pkgFile.pkg.package.name } --limit 1 | sed -nE \"s/^[^\\\"]*\\\"//; s/\\\".*//1p\"",
      "prepublish": [
        "cargo install cargo-audit --features=fix",
        {
          "command": "cargo generate-lockfile",
          "dryRunCommand": true,
          "runFromRoot": true,
          "pipe": true
        },
        {
          "command": "echo \"# Cargo Audit\"",
          "dryRunCommand": true,
          "pipe": true
        },
        {
          "command": "echo \"\\`\\`\\`\"",
          "dryRunCommand": true,
          "pipe": true
        },
        {
          "command": "cargo audit ${ process.env.CARGO_AUDIT_OPTIONS || '' }",
          "dryRunCommand": true,
          "runFromRoot": true,
          "pipe": true
        },
        {
          "command": "echo \"\\`\\`\\`\"",
          "dryRunCommand": true,
          "pipe": true
        }
      ],
      "publish": [
        "sleep 15s",
        {
          "command": "cargo package --allow-dirty",
          "dryRunCommand": true
        },
        {
          "command": "echo \"# Cargo Publish\"",
          "dryRunCommand": true,
          "pipe": true
        },
        {
          "command": "echo \"\\`\\`\\`\"",
          "dryRunCommand": true,
          "pipe": true
        },
        {
          "command": "cargo publish --no-verify",
          "dryRunCommand": "cargo publish --no-verify --dry-run --allow-dirty",
          "pipe": true
        },
        {
          "command": "echo \"\\`\\`\\`\"",
          "dryRunCommand": true,
          "pipe": true
        }
      ],
      "assets": [
        {
          "path": "${ pkg.path }/${ pkg.pkg }-${ pkgFile.version }.crate",
          "name": "${ pkg.pkg }-${ pkgFile.version }.crate"
        }
      ]
    }
  },
  "packages": {
    "utils-derive": {
      "path": "./utils/utils-derive/",
      "manager": "rust",
      "publish": false
    },
    "runtime": {
      "path": "./engine/runtime/",
      "manager": "rust",
      "publish": false
    },
    "store": {
      "path": "./engine/store/",
      "manager": "rust",
      "publish": false
    },
    "communication-macros": {
      "path": "./communication/communication-macros",
      "manager": "rust"
    },
    "stronghold-utils": {
      "path": "./utils/utils/",
      "manager": "rust",
      "publish": false,
      "dependencies": [
        "utils-derive"
      ]
    },
    "vault": {
      "path": "./engine/vault/",
      "manager": "rust",
      "publish": false,
      "dependencies": [
        "stronghold-utils"
      ]
    },
    "snapshot": {
      "path": "./engine/snapshot/",
      "manager": "rust",
      "publish": false,
      "dependencies": [
        "stronghold-utils"
      ]
    },
    "stronghold-engine": {
      "path": "./engine/",
      "manager": "rust",
      "dependencies": [
        "vault",
        "snapshot",
        "store",
        "runtime"
      ]
    },
    "stronghold-communication": {
      "path": "./communication/",
      "manager": "rust",
      "dependencies": [
        "stronghold-utils",
        "communication-macros"
      ]
    },
    "iota-stronghold": {
      "path": "./client/",
      "manager": "rust",
      "dependencies": [
        "stronghold-engine",
        "vault",
        "snapshot",
        "store",
        "stronghold-communication",
        "stronghold-utils",
        "runtime"
      ]
    },
    "commandline": {
      "path": "./products/commandline/",
      "manager": "rust",
      "publish": false,
      "dependencies": [
        "iota-stronghold"
      ]
    }
  }
}
